<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èµ›åšå°‘å¥³åŸºå› é‡ç»„å®éªŒå®¤ | Cyber-Gen V5.2</title>
    <style>
        :root {
            --pink: #ff007f;
            --blue: #00f3ff;
            --green: #39ff14;
            --purple: #bc13fe;
            --glass: rgba(255, 255, 255, 0.08);
        }

        body, html {
            margin: 0; padding: 0; height: 100%; width: 100%;
            background: #050505; color: #fff;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
            overflow: hidden;
        }

        /* åŠ¨æ€èƒŒæ™¯æ˜Ÿäº‘ */
        .nebula {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: 
                radial-gradient(circle at 20% 30%, rgba(188, 19, 254, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(0, 243, 255, 0.15) 0%, transparent 50%);
            z-index: -2;
            animation: backgroundFlow 10s ease-in-out infinite alternate;
        }
        @keyframes backgroundFlow { 0% { transform: scale(1) rotate(0deg); } 100% { transform: scale(1.1) rotate(2deg); } }

        /* ç½‘æ ¼èƒŒæ™¯ */
        .grid-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-image: linear-gradient(rgba(0, 243, 255, 0.05) 1px, transparent 1px),
                              linear-gradient(90deg, rgba(0, 243, 255, 0.05) 1px, transparent 1px);
            background-size: 50px 50px;
            z-index: -1;
        }

        /* åˆæˆæ—¶çš„å…¨å±é—ªçƒ */
        .flash-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: white; opacity: 0; z-index: 5000; pointer-events: none;
        }
        .flash-active { animation: flashAnim 0.4s ease-out; }
        @keyframes flashAnim { 0% { opacity: 0.8; } 100% { opacity: 0; } }

        header {
            height: 60px; display: flex; align-items: center; justify-content: center;
            border-bottom: 2px solid var(--blue); background: rgba(0,0,0,0.8); backdrop-filter: blur(10px);
            box-shadow: 0 0 20px rgba(0, 243, 255, 0.3); letter-spacing: 8px; font-weight: bold; font-size: 1.2rem;
        }

        .container { display: flex; height: calc(100vh - 60px); padding: 20px; gap: 20px; box-sizing: border-box; }

        /* å·¦ä¾§ï¼šåŸºå› ä»“åº“ */
        .sidebar {
            width: 260px; background: var(--glass); border: 1px solid var(--pink); border-radius: 10px;
            padding: 15px; display: grid; grid-template-columns: 1fr 1fr; gap: 12px; align-content: start;
        }
        .sidebar h3 { grid-column: span 2; font-size: 13px; color: var(--pink); margin: 0 0 10px 0; border-bottom: 1px solid rgba(255,0,127,0.3); padding-bottom: 5px; }

        .element {
            background: rgba(255, 255, 255, 0.05); border: 1px solid #444; padding: 12px 5px;
            border-radius: 8px; text-align: center; cursor: grab; transition: 0.3s;
        }
        .element:hover { border-color: var(--blue); background: rgba(0, 243, 255, 0.1); box-shadow: 0 0 15px var(--blue); transform: translateY(-3px); }
        .element-icon { font-size: 30px; display: block; margin-bottom: 5px; }
        .element-name { font-size: 11px; color: #ddd; }

        /* ä¸­é—´ï¼šè§‚æµ‹æ ¸å¿ƒåŒº */
        .main-view { flex: 1; position: relative; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        
        .core-pod {
            width: 240px; height: 320px; border: 4px solid var(--blue); border-radius: 120px 120px 30px 30px;
            position: relative; background: radial-gradient(circle at center, rgba(0, 243, 255, 0.1) 0%, transparent 80%);
            box-shadow: 0 0 30px rgba(0, 243, 255, 0.2); display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .core-pod.active { box-shadow: 0 0 60px var(--pink); border-color: var(--pink); transform: scale(1.05); }
        
        #mix-num { font-size: 65px; font-weight: 900; text-shadow: 0 0 20px var(--blue); color: #fff; }

        .btn-synth {
            margin-top: 30px; padding: 15px 70px; font-size: 20px; background: transparent;
            border: 2px solid var(--green); color: var(--green); cursor: pointer; font-weight: bold; letter-spacing: 10px;
            transition: 0.3s; box-shadow: 0 0 10px rgba(57, 255, 20, 0.2);
        }
        .btn-synth:hover { background: var(--green); color: #000; box-shadow: 0 0 30px var(--green); }

        /* å¼¹å‡ºç…§ç‰‡åŠæ‰«æç‰¹æ•ˆ */
        .photo-frame {
            position: absolute; width: 280px; background: #fff; padding: 12px; box-shadow: 0 0 50px rgba(0,0,0,0.8);
            z-index: 1000; cursor: move; animation: photoIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }
        @keyframes photoIn { 0% { transform: scale(0) rotate(-20deg); opacity: 0; } 100% { transform: scale(1) rotate(var(--rot)) translate(-50%, -50%); opacity: 1; } }
        
        .photo-frame img { width: 100%; display: block; border: 1px solid #eee; }
        .scanner { position: absolute; top: 0; left: 0; width: 100%; height: 2px; background: var(--green); box-shadow: 0 0 10px var(--green); animation: scanMove 2s linear infinite; pointer-events: none; }
        @keyframes scanMove { 0% { top: 0; } 100% { top: 100%; } }

        /* å³ä¾§ï¼šè£…é¥°æŒ‚ä»¶åŒº */
        .decor-bar { width: 110px; background: var(--glass); border: 1px solid var(--green); border-radius: 10px; padding: 15px; display: flex; flex-direction: column; gap: 12px; }
        .decor-btn { font-size: 28px; text-align: center; cursor: pointer; padding: 8px; border-radius: 8px; transition: 0.2s; background: rgba(255,255,255,0.05); border: 1px solid rgba(57, 255, 20, 0.2); }
        .decor-btn:hover { background: var(--green); transform: scale(1.1); box-shadow: 0 0 15px var(--green); }
        .sticker { position: absolute; font-size: 55px; pointer-events: none; z-index: 1100; filter: drop-shadow(2px 2px 5px rgba(0,0,0,0.3)); }

        .hint-text { position: fixed; bottom: 15px; left: 50%; transform: translateX(-50%); color: #666; font-size: 11px; letter-spacing: 1px; }
    </style>
</head>
<body>

<div class="flash-overlay" id="flash"></div>
<div class="nebula"></div>
<div class="grid-bg"></div>

<header>èµ›åšå°‘å¥³åŸºå› é‡ç»„å®éªŒå®¤ V5.2</header>

<div class="container">
    <div class="sidebar">
        <h3>å¾…é€‰åŸºå› åºåˆ—ï¼š</h3>
        <div class="element" draggable="true" ondragstart="drag(event)" data-id="1"><span class="element-icon">ğŸ¼</span><span class="element-name">å¹¼å´½åŸºå› </span></div>
        <div class="element" draggable="true" ondragstart="drag(event)" data-id="2"><span class="element-icon">ğŸŒ¶ï¸</span><span class="element-name">è¶…è½½è¾›è¾£</span></div>
        <div class="element" draggable="true" ondragstart="drag(event)" data-id="3"><span class="element-icon">ğŸ§ª</span><span class="element-name">ç§‘ç ”åºŸäºº</span></div>
        <div class="element" draggable="true" ondragstart="drag(event)" data-id="4"><span class="element-icon">ğŸ¥”</span><span class="element-name">ç¢³æ°´æ€ªå…½</span></div>
        <div class="element" draggable="true" ondragstart="drag(event)" data-id="5"><span class="element-icon">ğŸŒ™</span><span class="element-name">ç†¬å¤œå† å†›</span></div>
        <div class="element" draggable="true" ondragstart="drag(event)" data-id="6"><span class="element-icon">ğŸŸ</span><span class="element-name">é”¦é²¤é™„ä½“</span></div>
        <div class="element" draggable="true" ondragstart="drag(event)" data-id="7"><span class="element-icon">âš¡</span><span class="element-name">æƒ…ç»ªè¶…é¢‘</span></div>
        <div class="element" draggable="true" ondragstart="drag(event)" data-id="8"><span class="element-icon">ğŸ¤¡</span><span class="element-name">ä¹å­ä¸»ä¹‰</span></div>
    </div>

    <div class="main-view">
        <div class="core-pod" id="pod" ondrop="drop(event)" ondragover="allowDrop(event)">
            <div id="mix-num">0</div>
            <div style="font-size: 11px; color: var(--blue); letter-spacing: 2px; font-weight: bold;">å·²è½½å…¥å…ƒç´ </div>
        </div>
        <button class="btn-synth" onclick="synthesize()">å¼€å§‹ç”Ÿæˆ</button>
        <div id="status" style="margin-top:20px; color: var(--pink); font-size: 12px; font-family: monospace; letter-spacing: 1px;">ç³»ç»ŸçŠ¶æ€ï¼šå¾…æœºä¸­...</div>
    </div>

    <div class="decor-bar">
        <div style="font-size: 10px; color: var(--green); text-align: center; margin-bottom: 5px;">ä¸€é”®æ¶æ</div>
        <div class="decor-btn" onclick="applyDecor('ğŸ•¶ï¸')" title="è£…é…·">ğŸ•¶ï¸</div>
        <div class="decor-btn" onclick="applyDecor('ğŸ’¢')" title="æš´èº">ğŸ’¢</div>
        <div class="decor-btn" onclick="applyDecor('ğŸ’©')" title="åŠ æˆ">ğŸ’©</div>
        <div class="decor-btn" onclick="applyDecor('ğŸ·')" title="é¥­æ¡¶è®¤è¯">ğŸ·</div>
        <div class="decor-btn" onclick="applyDecor('ğŸ”¥')" title="ç‡ƒèµ·æ¥äº†">ğŸ”¥</div>
        <div class="decor-btn" onclick="applyDecor('ğŸ’–')" title="æ³¨å…¥çˆ±æ„">ğŸ’–</div>
        <button onclick="location.reload()" style="margin-top:auto; background:none; border:1px solid #444; color:#666; font-size:10px; cursor:pointer; padding:5px;">é‡å¯å®éªŒå®¤</button>
    </div>
</div>

<div class="hint-text">æç¤ºï¼šå°†å·¦ä¾§åŸºå› å›¾æ ‡æ‹–å…¥é‡ç»„èˆ±ï¼Œç‚¹å‡»ç”Ÿæˆã€‚ç…§ç‰‡å¯è‡ªç”±æ‹–åŠ¨ï¼Œä¸Šä¸€å¼ ä¼šè‡ªåŠ¨æ¶ˆå¤±ã€‚</div>

<script>
    let mixCount = 0;
    let currentPhotoNode = null;

    // --- éšæœºæ–‡æ¡ˆåº“ ---
    const reports = [
        "è§‚æµ‹æ—¥å¿—ï¼šè¯¥æ ·æœ¬ç”±äºé•¿æœŸâ€˜ç†¬å¤œâ€™ï¼ŒåŸºå› ä¸­å……æ»¡äº†å’–å•¡å› ä¸ç”µå­å±å¹•çš„ä½™æ¸©ã€‚",
        "è§‚æµ‹æ—¥å¿—ï¼šæ£€æµ‹åˆ°æå¼ºçš„â€˜å¹²é¥­â€™æœ¬èƒ½ï¼Œè¯¥ä¸ªä½“åœ¨ç«é”…é¢å‰ä¼šè‡ªåŠ¨å±è”½é¥±è…¹æ„Ÿã€‚",
        "è§‚æµ‹æ—¥å¿—ï¼šç³»ç»Ÿåˆ†ææ˜¾ç¤ºæ ·æœ¬çµé­‚æˆåˆ†ä¸­ï¼Œå¥¶èŒ¶å æ¯”é«˜è¾¾ 75.32%ï¼Œæ€¥éœ€æ³¨å…¥çç ã€‚",
        "è§‚æµ‹æ—¥å¿—ï¼šè­¦å‘Šï¼å‘ç°â€˜æ‹–å»¶ç—‡â€™åŸºå› çªå˜ï¼Œæ ·æœ¬æ­£è¯•å›¾å»¶è¿Ÿæœ¬æ¬¡é‡ç»„æŒ‡ä»¤ã€‚",
        "è§‚æµ‹æ—¥å¿—ï¼šè¯¥æ ·æœ¬åœ¨ç©¿ç€ç™½å¤§è¤‚æ—¶ï¼Œæ‘¸é±¼æ¦‚ç‡ä¼šç¬é—´æå‡ 200%ã€‚",
        "è§‚æµ‹æ—¥å¿—ï¼šUNIT_ID #å‘ç°è¿œå¤å°‘å¥³åŸºå› ï¼Œå…¶å¯çˆ±ç¨‹åº¦å·²è¶…å‡ºæœ¬å®éªŒå®¤è®¡ç®—ä¸Šé™ã€‚",
        "è§‚æµ‹æ—¥å¿—ï¼šé‡ç»„æˆåŠŸï¼æ³¨å…¥â€˜èµ›åšé”¦é²¤â€™æ¨¡ç»„ï¼Œè¯¥æ ·æœ¬ç›®å‰å¤„äºå¥½è¿çˆ†æ£šçŠ¶æ€ã€‚",
        "è§‚æµ‹æ—¥å¿—ï¼šé€»è¾‘æ ¸å¿ƒå´©æºƒï¼è¯¥æ ·æœ¬åŒæ—¶å…·å¤‡â€˜ç†æ€§ç ”ç©¶å‘˜â€™ä¸â€˜æ··æ²Œåƒè´§â€™åŒé‡äººæ ¼ã€‚",
        "è§‚æµ‹æ—¥å¿—ï¼šé‡ç»„å¤±è´¥ï¼Ÿä¸ï¼Œæ˜¯å› ä¸ºæ ·æœ¬å¤–è²Œåˆ†å€¼è¿‡é«˜ï¼Œç³»ç»Ÿæ˜¾ç¤ºå™¨äº§ç”Ÿè‡ªå‘æ€§è¿‡çƒ­ã€‚",
        "è§‚æµ‹æ—¥å¿—ï¼šåˆ†æç»“è®ºâ€”â€”è¿™æ˜¯ä¸€ä¸ªè¯•å›¾ç”¨ç§‘å­¦è§£é‡Šâ€˜ä¸ºä»€ä¹ˆåœŸè±†é•¿å¾—åƒå±è‚¡â€™çš„å¥‡å¦™ç”Ÿå‘½ä½“ã€‚",
        "è§‚æµ‹æ—¥å¿—ï¼šæ ·æœ¬ç‰¹è´¨â€”â€”è¡¨é¢æ˜¯å®éªŒå®¤é«˜å†·å­¦éœ¸ï¼Œå†…å¿ƒåœ¨å¾ªç¯æ’­æ”¾ã€Šå°è‹¹æœã€‹ã€‚",
        "è§‚æµ‹æ—¥å¿—ï¼šæ£€æµ‹åˆ°â€˜ç¤¾äº¤ææ€–åˆ†å­â€™æ½œè´¨ï¼Œè¯·å‹¿å°†å…¶ä¸å¤§é‡é™Œç”Ÿäººç±»åŒæ—¶æ”¾ç½®ã€‚",
        "è§‚æµ‹æ—¥å¿—ï¼šæ— è®ºåŸºå› å¦‚ä½•é‡ç»„ï¼Œè§‚æµ‹è®°å½•æ˜¾ç¤ºï¼šä½ æ°¸è¿œæ˜¯å®‡å®™ä¸­ç‹¬ä¸€æ— äºŒçš„æ€ªå¥‡å°‘å¥³ã€‚",
        "è§‚æµ‹æ—¥å¿—ï¼šæ­£åœ¨é‡ç»„... æ³¨å…¥â€˜å¿«ä¹å› å­â€™æˆåŠŸï¼Œè¯¥æ ·æœ¬ç›®å‰å¤„äº 100% äº¢å¥‹çŠ¶æ€ã€‚",
        "è§‚æµ‹æ—¥å¿—ï¼šæ ·æœ¬æŠ¥å‘Šâ€”â€”å…¶é€»è¾‘æ€ç»´å‘ˆè·³è·ƒå¼åˆ†å¸ƒï¼Œå¸¸äººéš¾ä»¥æ•æ‰å…¶è„‘å›è·¯ã€‚"
    ];

    function allowDrop(ev) { ev.preventDefault(); }
    function drag(ev) { ev.dataTransfer.setData("text", "added"); }
    function drop(ev) {
        ev.preventDefault();
        mixCount++;
        document.getElementById('mix-num').innerText = mixCount;
        document.getElementById('pod').classList.add('active');
        setTimeout(() => document.getElementById('pod').classList.remove('active'), 200);
        document.getElementById('status').innerText = "ç³»ç»ŸçŠ¶æ€ï¼šæ£€æµ‹åˆ°åŸºå› ç‰‡æ®µæ³¨å…¥...";
    }

    function synthesize() {
        if(mixCount === 0) { 
            document.getElementById('status').innerText = "ç³»ç»Ÿé”™è¯¯ï¼šè¯·å…ˆæŠ•å…¥åŸºå› æ ·æœ¬ï¼"; 
            return; 
        }

        // é—ªçƒç‰¹æ•ˆ
        document.getElementById('flash').classList.add('flash-active');
        setTimeout(() => document.getElementById('flash').classList.remove('flash-active'), 400);

        // è‡ªåŠ¨æ¸…ç†é€»è¾‘
        if(currentPhotoNode) {
            const old = currentPhotoNode;
            old.style.transition = "0.3s";
            old.style.transform = "scale(1.5) translate(-50%, -50%)";
            old.style.opacity = "0";
            setTimeout(() => old.remove(), 300);
        }

        const randomReport = reports[Math.floor(Math.random() * reports.length)];
        const randomID = Math.floor(Math.random() * 18) + 1; // å¯¹åº” 1.jpg - 18.jpg

        document.getElementById('status').innerText = "ç³»ç»ŸçŠ¶æ€ï¼šæ­£åœ¨è¿›è¡ŒåŸºå› é“¾é‡ç»„...";
        
        setTimeout(() => {
            createPhoto(randomID, randomReport);
            mixCount = 0;
            document.getElementById('mix-num').innerText = "0";
            document.getElementById('status').innerText = "ç³»ç»ŸçŠ¶æ€ï¼šé‡ç»„è§‚æµ‹å·²å®Œæˆ";
        }, 500);
    }

    function createPhoto(id, msg) {
        const frame = document.createElement('div');
        frame.className = 'photo-frame';
        const rotation = (Math.random() - 0.5) * 15;
        frame.style.setProperty('--rot', `${rotation}deg`);
        frame.style.left = '50%'; frame.style.top = '50%';
        frame.style.transform = 'translate(-50%, -50%)';

        frame.innerHTML = `
            <div class="scanner"></div>
            <img src="${id}.jpg" draggable="false">
            <div style="color:#000; font-size:11px; margin-top:10px; border-top:1px solid #eee; padding-top:8px; font-weight:bold; font-family:sans-serif; line-height:1.5;">
                <span style="color:var(--pink)">[ å®éªŒè§‚æµ‹è®°å½• ]</span><br>
                > ${msg}
            </div>
        `;

        makeDraggable(frame);
        document.querySelector('.main-view').appendChild(frame);
        currentPhotoNode = frame;
    }

    function applyDecor(emoji) {
        if(!currentPhotoNode) {
            document.getElementById('status').innerText = "æç¤ºï¼šè¯·å…ˆç”Ÿæˆç…§ç‰‡å†è¿›è¡Œè£…é¥°ï¼";
            return;
        }
        const sticker = document.createElement('div');
        sticker.innerText = emoji; sticker.className = 'sticker';
        sticker.style.left = 10 + Math.random() * 70 + '%';
        sticker.style.top = 10 + Math.random() * 70 + '%';
        currentPhotoNode.appendChild(sticker);
    }

    // ä¿®å¤åçš„ç¨³å®šæ‹–æ‹½ç®—æ³•
    function makeDraggable(el) {
        let isDragging = false;
        let startPos = { x: 0, y: 0 };
        let elPos = { x: 0, y: 0 };

        el.onmousedown = (e) => {
            isDragging = true;
            el.style.zIndex = 2000;
            const rect = el.getBoundingClientRect();
            // é”å®šæ—‹è½¬è§’åº¦å¹¶åˆ‡æ¢åˆ°ç»å¯¹åæ ‡å®šä½
            el.style.transform = `rotate(${el.style.getPropertyValue('--rot')})`;
            el.style.left = rect.left + 'px';
            el.style.top = rect.top + 'px';
            startPos.x = e.clientX; startPos.y = e.clientY;
            elPos.x = rect.left; elPos.y = rect.top;

            document.onmousemove = (e) => {
                if (!isDragging) return;
                const dx = e.clientX - startPos.x;
                const dy = e.clientY - startPos.y;
                el.style.left = (elPos.x + dx) + 'px';
                el.style.top = (elPos.y + dy) + 'px';
            };
            document.onmouseup = () => { isDragging = false; };
        };
    }
</script>
</body>
</html>
